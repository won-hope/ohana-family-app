server:
  port: ${PORT:8080} # Cloud Run은 PORT 환경변수를 주입하므로 이를 사용하도록 수정

spring:
  config:
    import: "optional:file:.env[.properties]"
  datasource:
    driver-class-name: org.postgresql.Driver
    password: ${DB_PASSWORD:ohana}
    url: ${DB_URL:jdbc:postgresql://localhost:5432/ohana}
    username: ${DB_USER:ohana}

  flyway:
    baseline-on-migrate: true
    enabled: false
    validate-on-migrate: false # ⚠️ 체크섬 불일치 무시 (개발 환경용)

  jpa:
    hibernate:
      ddl-auto: update
    open-in-view: false
    properties:
      hibernate:
        format_sql: true
        jdbc:
          time_zone: Asia/Seoul

management:
  endpoint:
    health:
      show-details: never
  endpoints:
    web:
      exposure:
        include: health,info

ohana:
  google:
    client-id: ${OHANA_GOOGLE_CLIENT_ID:replace-me}
    client-secret: ${OHANA_GOOGLE_CLIENT_SECRET:replace-me}
    redirect-uri: ${OHANA_GOOGLE_REDIRECT_URI:http://localhost:8080/google/sheets/connect/callback} # 환경변수로 분리
  crypto:
    token-secret: ${OHANA_CRYPTO_TOKEN_SECRET:randomstring32byteslongmustbehere!!} # 환경변수로 분리
  jwt:
    # 32+ bytes recommended for HS256.
    secret: ${OHANA_JWT_SECRET:change-me-change-me-change-me-32bytes-minimum}
    issuer: "ohana-server"
    access-token-minutes: 60
